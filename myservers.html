<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Servers - CSRV</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="sticky-header">
        <header>
            <div style="display: flex; align-items: center;">
                <div class="logo">
                    <i class="fas fa-server"></i>
                    <h1>CS Server Browser</h1>
                </div>
                <div class="nav-links">
                    <a href="index.html">Servers</a>
                    <a href="myservers.html" class="active">My Servers</a>
                    <a href="dailyclip.html" class="active">Daily Clip</a>
                    <a href="#">Options</a>
                </div>
            </div>
            <div class="controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search my servers...">
                </div>
                <button class="filter-btn">
                    <i class="fas fa-filter"></i>
                </button>
                <button class="toggle-stats-btn" id="toggleStats">
                    <i class="fas fa-chart-bar"></i>
                </button>
                <div class="user-controls">
                    <button class="profile-btn" id="profileBtn">
                        <i class="fas fa-user"></i>
                    </button>
                    <div class="profile-menu hidden" id="profileMenu">
                        <button class="login-menu-btn" onclick="window.location.href='auth.html'"><i class="fas fa-sign-in-alt"></i> Log In</button>
                        <button class="register-menu-btn" onclick="window.location.href='auth.html?register'"><i class="fas fa-user-plus"></i> Register</button>
                        <button class="settings-menu-btn"><i class="fas fa-cog"></i> Settings</button>
                    </div>
                </div>
            </div>
        </header>
    </div>

    <div class="container">

        <div id="emptyState" class="empty-state">
            <i class="fas fa-server"></i>
            <h2>No Servers Added Yet</h2>
            <p>You haven't added any servers to your list. Add your first server to get started!</p>
            <button class="add-server-btn" id="addServerBtnEmpty">
                <i class="fas fa-plus" style="color: var(--accent-primary);"></i> Add Your First Server
            </button>
        </div>


        <div id="myServersSection" class="server-section hidden">
            <div class="section-header">
                <i class="fas fa-heart"></i>
                <h2>My Servers</h2>
                <button class="add-server-btn" id="addServerBtn">
                    <i class="fas fa-plus"></i> Add Server
                </button>
            </div>
            <div class="server-list">
                <div class="server-header my-servers-header">
                    <div>RANK</div>
                    <div>CATEGORY</div>
                    <div>NAME</div>
                    <div>IP</div>
                    <div>LOCATION</div>
                    <div>GAME</div>
                    <div>PRIME</div>
                    <div>MODE</div>
                    <div>ACTIONS</div>
                </div>


                <div id="serverListContainer"></div>
            </div>
        </div>
    </div>


    <div id="addServerModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Server</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addServerForm">
                    <div class="form-group">
                        <label for="serverName">Server Name</label>
                        <input type="text" id="serverName" required>
                    </div>
                    <div class="form-group">
                        <label for="serverIP">Server IP:Port</label>
                        <input type="text" id="serverIP" placeholder="e.g., 192.168.1.1:27015" required>
                    </div>
                    <div class="form-group">
                        <label for="serverCategory">Category</label>
                        <select id="serverCategory" required>
                            <option value="">Select Category</option>
                            <option value="deathmatch">Deathmatch</option>
                            <option value="retake">Retake</option>
                            <option value="competitive">Competitive</option>
                            <option value="casual">Casual</option>
                            <option value="surf">Surf</option>
                            <option value="bhop">Bunny Hop</option>
                            <option value="arena">Arena</option>
                            <option value="wingman">Wingman</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="serverGame">Game</label>
                        <select id="serverGame" required>
                            <option value="cs2">Counter-Strike 2</option>
                            <option value="csgo">CS:GO</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="serverPrime">Prime Status</label>
                        <select id="serverPrime" required>
                            <option value="prime">Prime</option>
                            <option value="non-prime">Non-Prime</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="serverMode">Mode</label>
                        <input type="text" id="serverMode" required>
                    </div>
                    <div class="form-group">
                        <label for="serverTags">Tags (comma separated)</label>
                        <input type="text" id="serverTags" placeholder="e.g., 128-tick, competitive, EU">
                    </div>
                    <div class="form-group">
                        <label for="serverDescription">Description</label>
                        <textarea id="serverDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="serverBanner">Banner Image URL</label>
                        <input type="text" id="serverBanner" placeholder="Paste image URL">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-btn">Cancel</button>
                        <button type="submit" class="save-btn">Add Server</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div id="editServerModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Edit Server</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editServerForm">
                    <input type="hidden" id="editServerId">
                    <div class="form-group">
                        <label for="editServerName">Server Name</label>
                        <input type="text" id="editServerName" required>
                    </div>
                    <div class="form-group">
                        <label for="editServerIP">Server IP:Port</label>
                        <input type="text" id="editServerIP" required>
                    </div>
                    <div class="form-group">
                        <label for="editServerCategory">Category</label>
                        <select id="editServerCategory" required>
                            <option value="deathmatch">Deathmatch</option>
                            <option value="retake">Retake</option>
                            <option value="competitive">Competitive</option>
                            <option value="casual">Casual</option>
                            <option value="surf">Surf</option>
                            <option value="bhop">Bunny Hop</option>
                            <option value="arena">Arena</option>
                            <option value="wingman">Wingman</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editServerGame">Game</label>
                        <select id="editServerGame" required>
                            <option value="cs2">Counter-Strike 2</option>
                            <option value="csgo">CS:GO</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editServerPrime">Prime Status</label>
                        <select id="editServerPrime" required>
                            <option value="prime">Prime</option>
                            <option value="non-prime">Non-Prime</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editServerMode">Mode</label>
                        <input type="text" id="editServerMode" required>
                    </div>
                    <div class="form-group">
                        <label for="editServerRank">Rank</label>
                        <select id="editServerRank">
                            <option value="">None</option>
                            <option value="vip">VIP</option>
                            <option value="boost">BOOST</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editServerLocation">Location</label>
                        <input type="text" id="editServerLocation" required>
                    </div>
                    <div class="form-group">
                        <label for="editServerTags">Tags (comma separated)</label>
                        <input type="text" id="editServerTags">
                    </div>
                    <div class="form-group">
                        <label for="editServerDescription">Description</label>
                        <textarea id="editServerDescription" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="editServerBanner">Banner Image URL</label>
                        <input type="text" id="editServerBanner">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="delete-btn">Delete Server</button>
                        <button type="button" class="cancel-btn">Cancel</button>
                        <button type="submit" class="save-btn">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="stats-bar" id="statsBar">
        <div class="stats-item">
            <i class="fas fa-globe-americas"></i>
            <span>Total Servers: <strong id="totalServersCount">0</strong></span>
        </div>
        <div class="stats-item">
            <i class="fas fa-users"></i>
            <span>My Servers: <strong id="myServersCount">0</strong></span>
        </div>
        <div class="stats-item">
            <i class="fas fa-bolt"></i>
            <span>Your Ping: <strong>32ms</strong></span>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <i class="fas fa-server"></i>
                <span>CS Server Browser</span>
            </div>
            <div class="footer-links">
                <a href="#">About Us</a>
                <a href="#">Contact</a>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
            </div>
            <div class="social-links">
                <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
                <a href="#"><i class="fab fa-discord"></i></a>
                <a href="#"><i class="fab fa-steam"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 CSRV. All rights reserved. Counter-Strike is a registered trademark of Valve Corporation.
        </div>
    </footer>

    <script>

        let myServers = JSON.parse(localStorage.getItem('myServers')) || [];
        let currentEditId = null;


        const emptyState = document.getElementById('emptyState');
        const myServersSection = document.getElementById('myServersSection');
        const serverListContainer = document.getElementById('serverListContainer');
        const addServerModal = document.getElementById('addServerModal');
        const editServerModal = document.getElementById('editServerModal');
        const addServerForm = document.getElementById('addServerForm');
        const editServerForm = document.getElementById('editServerForm');
        const addServerBtn = document.getElementById('addServerBtn');
        const addServerBtnEmpty = document.getElementById('addServerBtnEmpty');
        const totalServersCount = document.getElementById('totalServersCount');
        const myServersCount = document.getElementById('myServersCount');


        function initPage() {
            updateServerCounts();
            renderServerList();
            updateUI();
        }


        function updateServerCounts() {
            totalServersCount.textContent = '1,284';
            myServersCount.textContent = myServers.length;
        }


        function updateUI() {
            if (myServers.length === 0) {
                emptyState.classList.remove('hidden');
                myServersSection.classList.add('hidden');
            } else {
                emptyState.classList.add('hidden');
                myServersSection.classList.remove('hidden');
            }
        }


        function renderServerList() {
            serverListContainer.innerHTML = '';
            
            myServers.forEach(server => {
                const serverRow = document.createElement('div');
                serverRow.className = 'server-row my-server-row';
                serverRow.innerHTML = `
                    <div class="server-rank">
                        <span class="rank-badge ${server.rank || ''}">${server.rank ? server.rank.toUpperCase() : 'â€”'}</span>
                    </div>
                    <div class="server-category">
                        <i class="fas ${getCategoryIcon(server.category)}"></i>
                        ${capitalizeFirstLetter(server.category)}
                    </div>
                    <div class="server-name-info">
                       ${server.name}
                    </div>
                    <div class="server-ip">${server.ip}</div>
                    <div class="server-location">
                        <i class="fas fa-globe"></i>
                        ${server.location || 'Unknown'}
                    </div>
                    <div class="server-game">
                        ${server.game === 'cs2' ? 'CS2' : 'CS:GO'}
                    </div>
                    <div class="server-prime">
                        <span class="prime-badge ${server.prime}">${server.prime === 'prime' ? 'Prime' : 'Non-Prime'}</span>
                    </div>
                    <div class="server-mode">
                        ${server.mode}
                    </div>
                    <div class="server-actions">
                        <button class="edit-server-btn" data-id="${server.id}">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                    <div class="expand-btn" onclick="toggleExpand(this)">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="server-expanded-content">
                        <div class="server-banner" style="${server.banner ? `background-image: url('${server.banner}')` : 'background: linear-gradient(90deg, #1a2a6c, #b21f1f, #1a2a6c)'}"></div>
                        <p class="server-description">${server.description || 'No description provided.'}</p>
                        <div class="server-tags">
                            ${server.tags ? server.tags.split(',').map(tag => `<div class="tag">${tag.trim()}</div>`).join('') : ''}
                        </div>
                    </div>
                `;
                serverListContainer.appendChild(serverRow);
            });


            document.querySelectorAll('.edit-server-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const serverId = btn.getAttribute('data-id');
                    openEditModal(serverId);
                });
            });
        }


        function getCategoryIcon(category) {
            const icons = {
                'deathmatch': 'skull',
                'retake': 'bomb',
                'competitive': 'trophy',
                'casual': 'users',
                'surf': 'water',
                'bhop': 'running',
                'arena': 'fist-raised',
                'wingman': 'user-friends'
            };
            return icons[category] || 'server';
        }


        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }


        function openAddModal() {
            addServerModal.classList.remove('hidden');
        }


        function openEditModal(serverId) {
            const server = myServers.find(s => s.id === serverId);
            if (server) {
                currentEditId = serverId;
                document.getElementById('editServerId').value = server.id;
                document.getElementById('editServerName').value = server.name;
                document.getElementById('editServerIP').value = server.ip;
                document.getElementById('editServerCategory').value = server.category;
                document.getElementById('editServerGame').value = server.game;
                document.getElementById('editServerPrime').value = server.prime;
                document.getElementById('editServerMode').value = server.mode;
                document.getElementById('editServerRank').value = server.rank || '';
                document.getElementById('editServerLocation').value = server.location || '';
                document.getElementById('editServerTags').value = server.tags || '';
                document.getElementById('editServerDescription').value = server.description || '';
                document.getElementById('editServerBanner').value = server.banner || '';
                
                editServerModal.classList.remove('hidden');
            }
        }


        function closeModals() {
            addServerModal.classList.add('hidden');
            editServerModal.classList.add('hidden');
        }


        function addServer(serverData) {
            const newServer = {
                id: Date.now().toString(),
                ...serverData,
                rank: '',
                location: ''
            };
            
            myServers.push(newServer);
            localStorage.setItem('myServers', JSON.stringify(myServers));
            updateServerCounts();
            renderServerList();
            updateUI();
            closeModals();
        }


        function editServer(serverId, serverData) {
            const index = myServers.findIndex(s => s.id === serverId);
            if (index !== -1) {
                myServers[index] = { ...myServers[index], ...serverData };
                localStorage.setItem('myServers', JSON.stringify(myServers));
                renderServerList();
                closeModals();
            }
        }


        function deleteServer(serverId) {
            if (confirm('Are you sure you want to delete this server?')) {
                myServers = myServers.filter(s => s.id !== serverId);
                localStorage.setItem('myServers', JSON.stringify(myServers));
                updateServerCounts();
                renderServerList();
                updateUI();
                closeModals();
            }
        }


        function toggleExpand(button) {
            const serverRow = button.closest('.server-row');
            serverRow.classList.toggle('expanded');
            
            const icon = button.querySelector('i');
            if (serverRow.classList.contains('expanded')) {
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }


        document.addEventListener('DOMContentLoaded', initPage);

        addServerBtn.addEventListener('click', openAddModal);
        addServerBtnEmpty.addEventListener('click', openAddModal);

        document.querySelectorAll('.close-modal, .cancel-btn').forEach(btn => {
            btn.addEventListener('click', closeModals);
        });

        document.querySelector('.delete-btn').addEventListener('click', () => {
            if (currentEditId) {
                deleteServer(currentEditId);
            }
        });

        addServerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = {
                name: document.getElementById('serverName').value,
                ip: document.getElementById('serverIP').value,
                category: document.getElementById('serverCategory').value,
                game: document.getElementById('serverGame').value,
                prime: document.getElementById('serverPrime').value,
                mode: document.getElementById('serverMode').value,
                tags: document.getElementById('serverTags').value,
                description: document.getElementById('serverDescription').value,
                banner: document.getElementById('serverBanner').value
            };
            addServer(formData);
            addServerForm.reset();
        });

        editServerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formData = {
                name: document.getElementById('editServerName').value,
                ip: document.getElementById('editServerIP').value,
                category: document.getElementById('editServerCategory').value,
                game: document.getElementById('editServerGame').value,
                prime: document.getElementById('editServerPrime').value,
                mode: document.getElementById('editServerMode').value,
                rank: document.getElementById('editServerRank').value,
                location: document.getElementById('editServerLocation').value,
                tags: document.getElementById('editServerTags').value,
                description: document.getElementById('editServerDescription').value,
                banner: document.getElementById('editServerBanner').value
            };
            editServer(currentEditId, formData);
        });


        window.addEventListener('click', (e) => {
            if (e.target === addServerModal || e.target === editServerModal) {
                closeModals();
            }
        });


        document.getElementById('profileBtn').addEventListener('click', function(e) {
            e.stopPropagation();
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('hidden');
        });


        document.addEventListener('click', function(e) {
            const menu = document.getElementById('profileMenu');
            if (!menu.contains(e.target) && !e.target.closest('.profile-btn')) {
                menu.classList.add('hidden');
            }
        });


        document.getElementById('toggleStats').addEventListener('click', function() {
            const statsBar = document.getElementById('statsBar');
            statsBar.classList.toggle('hidden');
        });
    </script>
</body>
</html>